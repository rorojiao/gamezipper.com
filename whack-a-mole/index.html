<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>Whack-a-Mole</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;overflow:hidden;font-family:'Segoe UI',Arial,sans-serif}
body{background:
  radial-gradient(circle at 20% 50%,rgba(100,180,60,.3),transparent 40%),
  radial-gradient(circle at 80% 30%,rgba(80,160,40,.3),transparent 40%),
  repeating-linear-gradient(45deg,transparent,transparent 20px,rgba(0,100,0,.05) 20px,rgba(0,100,0,.05) 40px),
  linear-gradient(180deg,#5cb338 0%,#4a8f29 30%,#3d7a22 100%);
  background-attachment:fixed}
#game-container{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;user-select:none;-webkit-user-select:none}
#hud{position:absolute;top:0;left:0;right:0;display:flex;justify-content:space-between;padding:10px 20px;font-size:clamp(16px,4vw,28px);color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.5);z-index:10;background:linear-gradient(180deg,rgba(0,0,0,.3),transparent)}
#hud>div{min-width:80px}
#grid{display:grid;grid-template-columns:repeat(3,1fr);gap:clamp(8px,2vw,20px);padding:clamp(8px,2vw,20px);max-width:min(90vw,90vh,500px);width:100%;aspect-ratio:1}
.hole{position:relative;overflow:hidden;cursor:none;aspect-ratio:1;
  background:radial-gradient(ellipse 80% 60% at 50% 55%,#1a0a00 0%,#2d1a0a 40%,#4a3020 70%,transparent 100%);
  border-radius:50%;
  box-shadow:inset 0 8px 20px rgba(0,0,0,.7),inset 0 -4px 10px rgba(0,0,0,.3),0 4px 8px rgba(0,0,0,.3)}
.hole::before{content:'';position:absolute;top:5%;left:10%;width:80%;height:20%;background:radial-gradient(ellipse,rgba(255,255,255,.08),transparent);border-radius:50%;z-index:1}
.hole::after{content:'';position:absolute;bottom:0;left:0;right:0;height:40%;background:linear-gradient(0deg,#2d1a0a,transparent);z-index:3;pointer-events:none}
.mole-wrapper{position:absolute;bottom:-100%;left:10%;width:80%;height:80%;z-index:2;transition:bottom .15s ease-out}
.mole-wrapper.up{bottom:15%;animation:moleSpring .3s cubic-bezier(.34,1.56,.64,1)}
@keyframes moleSpring{0%{bottom:-100%;transform:scaleX(1.1) scaleY(0.8)}40%{transform:scaleX(0.9) scaleY(1.15)}70%{transform:scaleX(1.03) scaleY(0.97)}100%{transform:scaleX(1) scaleY(1)}}
.mole-wrapper.hit{bottom:15%;animation:moleHit .3s ease-out forwards}
@keyframes moleHit{0%{transform:scaleY(1)}30%{transform:scaleY(0.3)}100%{transform:scaleY(0.3) translateY(100%)}}
.mole-body{width:100%;height:100%;position:relative}
/* Shockwave */
.shockwave{position:absolute;z-index:52;pointer-events:none;border:3px solid rgba(255,215,0,0.8);border-radius:50%;animation:shockExpand .5s ease-out forwards}
@keyframes shockExpand{0%{width:10px;height:10px;opacity:1;transform:translate(-50%,-50%)}100%{width:120px;height:120px;opacity:0;transform:translate(-50%,-50%)}}
/* Gold rain */
.gold-rain{position:absolute;z-index:51;width:6px;height:20px;background:linear-gradient(180deg,#ffd700,#ffaa00);border-radius:2px;pointer-events:none;animation:goldFall 1.5s ease-in forwards}
@keyframes goldFall{0%{opacity:1;transform:translateY(-100vh) rotate(0deg)}100%{opacity:0;transform:translateY(100vh) rotate(720deg)}}
/* Red flash for bomb */
.bomb-flash{position:fixed;inset:0;background:rgba(255,0,0,0.5);z-index:99;pointer-events:none;animation:bombFlash .4s ease-out forwards}
@keyframes bombFlash{0%{opacity:1}100%{opacity:0}}
/* CSS Cute Mole */
.mole-head{width:70%;height:60%;background:radial-gradient(circle at 40% 35%,#c4944a,#8B6914 80%);border-radius:50% 50% 40% 40%;position:absolute;top:0;left:15%;display:flex;align-items:center;justify-content:center;flex-direction:column;box-shadow:inset 0 -4px 8px rgba(0,0,0,.2)}
.mole-wrapper.golden .mole-head{background:radial-gradient(circle at 40% 35%,#ffe680,#FFD700 80%);box-shadow:0 0 15px rgba(255,215,0,.6),inset 0 -4px 8px rgba(0,0,0,.15)}
.mole-wrapper.bomb .mole-head{background:radial-gradient(circle at 40% 35%,#e74c3c,#c0392b 80%);border-radius:50%;box-shadow:0 0 10px rgba(255,0,0,.5)}
/* Cheeks */
.mole-head::after{content:'';position:absolute;bottom:25%;left:5%;width:90%;height:20%;background:radial-gradient(ellipse at 15% 50%,rgba(255,150,150,.4),transparent 50%),radial-gradient(ellipse at 85% 50%,rgba(255,150,150,.4),transparent 50%);pointer-events:none}
.mole-eyes{display:flex;gap:15%;margin-top:15%}
.mole-eye{width:22%;height:0;padding-bottom:22%;background:radial-gradient(circle at 40% 35%,#fff,#e8e8e8);border-radius:50%;position:relative;box-shadow:0 1px 3px rgba(0,0,0,.2)}
.mole-eye::after{content:'';width:50%;height:50%;background:radial-gradient(circle at 40% 35%,#333,#111);border-radius:50%;position:absolute;top:25%;left:30%}
/* Tiny eye highlight */
.mole-eye::before{content:'';width:20%;height:20%;background:#fff;border-radius:50%;position:absolute;top:20%;left:50%;z-index:1}
.mole-wrapper.hit .mole-eye::after{width:80%;height:15%;top:42%;left:10%;border-radius:0;background:#333}
.mole-wrapper.hit .mole-eye::before{display:none}
.mole-wrapper.hit .mole-head::before{content:'‚úï';position:absolute;top:15%;font-size:clamp(8px,2vw,14px);color:#c0392b;z-index:2}
/* Nose */
.mole-nose{width:16%;height:0;padding-bottom:12%;background:radial-gradient(circle at 40% 35%,#e8b87a,#d4a054);border-radius:50%;margin-top:5%;box-shadow:0 1px 2px rgba(0,0,0,.2)}
.mole-wrapper.golden .mole-nose{background:radial-gradient(circle,#c9a030,#b8860b)}
.mole-wrapper.bomb .mole-nose{display:none}
/* Teeth */
.mole-teeth{display:flex;gap:2px;margin-top:2%}
.mole-tooth{width:12%;height:0;padding-bottom:14%;background:#fff;border-radius:0 0 3px 3px;box-shadow:0 1px 2px rgba(0,0,0,.15)}
.mole-wrapper.bomb .mole-teeth{display:none}
.bomb-fuse{display:none}
.mole-wrapper.bomb .bomb-fuse{display:block;position:absolute;top:-10%;left:50%;width:3px;height:20%;background:#333;transform:rotate(15deg)}
.bomb-icon{display:none}
.mole-wrapper.bomb .bomb-icon{display:block;position:absolute;top:30%;left:50%;transform:translateX(-50%);font-size:clamp(12px,3vw,24px);color:#fff}
.mole-wrapper.bomb .mole-eyes{display:none}
#overlay{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(0,0,0,.7);z-index:100;color:#fff;text-align:center;padding:20px}
#overlay h1{font-size:clamp(28px,8vw,60px);margin-bottom:10px;text-shadow:3px 3px 6px rgba(0,0,0,.5)}
#overlay h2{font-size:clamp(18px,5vw,36px);margin-bottom:5px}
#overlay p{font-size:clamp(14px,3.5vw,24px);margin:5px 0;color:#ccc}
#overlay button{margin-top:20px;padding:12px 40px;font-size:clamp(16px,4vw,28px);background:#e67e22;color:#fff;border:none;border-radius:12px;cursor:pointer;font-weight:bold;box-shadow:0 4px 0 #c0612b;transition:transform .1s}
#overlay button:active{transform:translateY(2px);box-shadow:0 2px 0 #c0612b}
.float-score{position:absolute;z-index:50;font-size:clamp(18px,5vw,32px);font-weight:bold;pointer-events:none;animation:floatUp .8s ease-out forwards;text-shadow:2px 2px 4px rgba(0,0,0,.5)}
.float-score.pos{color:#2ecc71}
.float-score.neg{color:#e74c3c}
.float-score.gold{color:#f1c40f}
@keyframes floatUp{0%{opacity:1;transform:translateY(0) scale(1)}100%{opacity:0;transform:translateY(-60px) scale(1.3)}}
/* Stars splash */
.star{position:absolute;z-index:51;pointer-events:none;font-size:clamp(14px,3vw,24px);animation:starBurst .6s ease-out forwards}
@keyframes starBurst{0%{opacity:1;transform:translate(0,0) scale(1) rotate(0deg)}100%{opacity:0;transform:translate(var(--sx),var(--sy)) scale(0.3) rotate(360deg)}}
@keyframes shake{0%,100%{transform:translateX(0)}20%{transform:translateX(-8px)}40%{transform:translateX(8px)}60%{transform:translateX(-6px)}80%{transform:translateX(6px)}}
.shake{animation:shake .3s ease}
#hammer{position:fixed;z-index:999;pointer-events:none;font-size:clamp(28px,6vw,48px);transform:rotate(-30deg);transition:transform 50ms;display:none}
#hammer.smash{transform:rotate(10deg) scale(1.2)}
</style>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8346383990981353" crossorigin="anonymous"></script>
</head>
<body><a href="https://gamezipper.com/" style="position:fixed;top:0;left:0;right:0;background:rgba(0,0,0,0.85);color:#4ecdc4;text-align:center;padding:4px;font-size:12px;z-index:99999;text-decoration:none">‚¨Ö More Games at GameZipper.com</a>
<div id="game-container">
  <div id="hud">
    <div id="score-display">Score: 0</div>
    <div id="timer-display" style="text-align:right">Time: 60</div>
  </div>
  <div id="grid"></div>
  <div id="overlay">
    <h1>üî® Whack-a-Mole</h1>
    <p>Whack moles for points! Avoid bombs!</p>
    <p>üü§ Normal +10 &nbsp; üü° Golden +50 &nbsp; üî¥ Bomb -30</p>
    <button id="start-btn">Play!</button>
  </div>
</div>
<div id="hammer">üî®</div>
<script>
(function(){
const grid=document.getElementById('grid');
const overlay=document.getElementById('overlay');
const scoreDisplay=document.getElementById('score-display');
const timerDisplay=document.getElementById('timer-display');
const startBtn=document.getElementById('start-btn');
const hammer=document.getElementById('hammer');
const container=document.getElementById('game-container');
let score=0,timeLeft=60,gameActive=false,timerInterval,spawnTimeout;
let highScore=parseInt(localStorage.getItem('wam_high'))||0;
const holes=[];
const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
function playSound(freq,dur,type='square',vol=.15){
  const o=audioCtx.createOscillator(),g=audioCtx.createGain();
  o.type=type;o.frequency.setValueAtTime(freq,audioCtx.currentTime);
  g.gain.setValueAtTime(vol,audioCtx.currentTime);
  g.gain.exponentialRampToValueAtTime(.001,audioCtx.currentTime+dur);
  o.connect(g);g.connect(audioCtx.destination);
  o.start();o.stop(audioCtx.currentTime+dur);
}
function hitSound(){playSound(800,.1);playSound(400,.15,'sawtooth',.1)}
function goldSound(){playSound(1200,.1);playSound(1600,.15,'sine',.12);playSound(2000,.1,'sine',.08)}
function bombSound(){playSound(150,.3,'sawtooth',.2);playSound(100,.2,'square',.15)}

function spawnStars(rect,count=20,golden=false){
  const stars=['‚≠ê','‚ú®','üí´','‚ö°','üåü'];
  const n=golden?30:count;
  for(let i=0;i<n;i++){
    const s=document.createElement('div');
    s.className='star';
    s.textContent=stars[Math.random()*stars.length|0];
    const angle=Math.random()*Math.PI*2;
    const dist=50+Math.random()*80;
    s.style.setProperty('--sx',Math.cos(angle)*dist+'px');
    s.style.setProperty('--sy',Math.sin(angle)*dist-30+'px');
    s.style.left=rect.left+rect.width/2-10+'px';
    s.style.top=rect.top+rect.height/3+'px';
    s.style.fontSize=golden?'clamp(18px,4vw,32px)':'clamp(14px,3vw,24px)';
    document.body.appendChild(s);
    setTimeout(()=>s.remove(),600);
  }
  // Shockwave
  const sw=document.createElement('div');sw.className='shockwave';
  sw.style.left=rect.left+rect.width/2+'px';sw.style.top=rect.top+rect.height/3+'px';
  document.body.appendChild(sw);setTimeout(()=>sw.remove(),500);
}
function spawnGoldRain(){
  for(let i=0;i<10;i++){
    const g=document.createElement('div');g.className='gold-rain';
    g.style.left=Math.random()*window.innerWidth+'px';g.style.top='0px';
    g.style.animationDelay=Math.random()*0.5+'s';
    document.body.appendChild(g);setTimeout(()=>g.remove(),2000);
  }
}
function spawnBombFlash(){
  const f=document.createElement('div');f.className='bomb-flash';
  document.body.appendChild(f);setTimeout(()=>f.remove(),400);
}

for(let i=0;i<9;i++){
  const hole=document.createElement('div');
  hole.className='hole';
  const mw=document.createElement('div');
  mw.className='mole-wrapper';
  mw.innerHTML=`<div class="mole-body"><div class="mole-head"><div class="mole-eyes"><div class="mole-eye"></div><div class="mole-eye"></div></div><div class="mole-nose"></div><div class="mole-teeth"><div class="mole-tooth"></div><div class="mole-tooth"></div></div></div><div class="bomb-fuse"></div><span class="bomb-icon">üí£</span></div>`;
  hole.appendChild(mw);
  grid.appendChild(hole);
  const h={el:hole,mole:mw,active:false,type:'normal',timeout:null};
  holes.push(h);
  hole.addEventListener('pointerdown',e=>{e.preventDefault();whack(h,e)});
}
document.addEventListener('pointermove',e=>{
  hammer.style.left=e.clientX-10+'px';
  hammer.style.top=e.clientY-5+'px';
});
document.addEventListener('pointerdown',()=>{hammer.classList.add('smash');setTimeout(()=>hammer.classList.remove('smash'),100)});
function showHammer(){hammer.style.display='block';document.body.style.cursor='none'}
function hideHammer(){hammer.style.display='none';document.body.style.cursor=''}
function whack(h,e){
  if(!gameActive||!h.active)return;
  h.active=false;
  clearTimeout(h.timeout);
  h.mole.classList.add('hit');
  let pts=0,cls='pos';
  if(h.type==='golden'){pts=50;cls='gold';goldSound()}
  else if(h.type==='bomb'){pts=-30;cls='neg';bombSound()}
  else{pts=10;hitSound()}
  score+=pts;
  if(score<0)score=0;
  scoreDisplay.textContent='Score: '+score;
  // Stars + shake + effects
  const rect=h.el.getBoundingClientRect();
  if(h.type==='golden'){spawnStars(rect,30,true);spawnGoldRain();}
  else if(h.type==='bomb'){spawnBombFlash();}
  else{spawnStars(rect,20,false);}
  container.classList.remove('shake');void container.offsetWidth;container.classList.add('shake');
  const ft=document.createElement('div');
  ft.className='float-score '+cls;
  ft.textContent=(pts>0?'+':'')+pts;
  ft.style.left=rect.left+rect.width/2-20+'px';
  ft.style.top=rect.top+'px';
  document.body.appendChild(ft);
  setTimeout(()=>ft.remove(),800);
  setTimeout(()=>{h.mole.classList.remove('up','hit','golden','bomb');h.mole.className='mole-wrapper'},400);
}
function getSpeed(){
  const elapsed=60-timeLeft;
  const minInterval=400,maxInterval=1500;
  const interval=maxInterval-(maxInterval-minInterval)*(elapsed/60);
  return{interval:Math.max(minInterval,interval),stay:Math.max(500,1800-elapsed*20)};
}
function spawnMole(){
  if(!gameActive)return;
  const available=holes.filter(h=>!h.active);
  if(!available.length){spawnTimeout=setTimeout(spawnMole,200);return}
  const h=available[Math.floor(Math.random()*available.length)];
  const r=Math.random();
  h.mole.classList.remove('golden','bomb','hit');
  if(r<.08){h.type='bomb';h.mole.classList.add('bomb')}
  else if(r<.18){h.type='golden';h.mole.classList.add('golden')}
  else{h.type='normal'}
  h.active=true;
  h.mole.classList.add('up');
  const{stay}=getSpeed();
  h.timeout=setTimeout(()=>{
    if(h.active){h.active=false;h.mole.classList.remove('up','golden','bomb');h.mole.className='mole-wrapper'}
  },stay);
  const{interval}=getSpeed();
  spawnTimeout=setTimeout(spawnMole,interval*(.5+Math.random()*.8));
}
function startGame(){
  if(audioCtx.state==='suspended')audioCtx.resume();
  score=0;timeLeft=60;gameActive=true;
  scoreDisplay.textContent='Score: 0';
  timerDisplay.textContent='Time: 60';
  overlay.style.display='none';
  showHammer();
  holes.forEach(h=>{h.active=false;h.mole.className='mole-wrapper'});
  timerInterval=setInterval(()=>{
    timeLeft--;
    timerDisplay.textContent='Time: '+timeLeft;
    if(timeLeft<=10){
      timerDisplay.style.color='#e74c3c';
      timerDisplay.style.transition='transform 0.2s';
      timerDisplay.style.transform='scale(1.3)';
      setTimeout(()=>timerDisplay.style.transform='scale(1)',200);
    }
    if(timeLeft<=0)endGame();
  },1000);
  spawnMole();
  setTimeout(()=>{if(gameActive)spawnMole()},800);
}
function endGame(){
  gameActive=false;
  clearInterval(timerInterval);
  clearTimeout(spawnTimeout);
  hideHammer();
  timerDisplay.style.color='#fff';
  holes.forEach(h=>{clearTimeout(h.timeout);h.active=false;h.mole.className='mole-wrapper'});
  if(score>highScore){highScore=score;localStorage.setItem('wam_high',highScore)}
  overlay.innerHTML=`<h1>‚è∞ Time's Up!</h1><h2>Score: <span id="count-up">0</span></h2><p>Best: ${highScore}</p><button id="start-btn">Play Again</button>`;
  overlay.style.display='flex';
  // Counting up animation
  const countEl=document.getElementById('count-up');
  let cur=0;const step=Math.max(1,Math.ceil(score/40));
  const countInterval=setInterval(()=>{
    cur=Math.min(cur+step,score);countEl.textContent=cur;
    countEl.style.transform='scale(1.2)';setTimeout(()=>countEl.style.transform='scale(1)',50);
    if(cur>=score)clearInterval(countInterval);
  },30);
  document.getElementById('start-btn').addEventListener('click',startGame);
}
startBtn.addEventListener('click',startGame);
})();
</script>

<!-- Tutorial Overlay -->
<div id="tutorial-overlay" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.75);z-index:99999;display:flex;align-items:center;justify-content:center;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;">
  <div style="background:rgba(30,30,40,0.97);border-radius:20px;padding:32px 28px 24px;max-width:340px;width:90%;color:#fff;text-align:center;box-shadow:0 8px 32px rgba(0,0,0,0.5);">
    <div style="font-size:28px;font-weight:bold;margin-bottom:18px;">üî® How to Play</div>
    <div style="font-size:16px;line-height:1.8;text-align:left;margin-bottom:20px;">üëÜ Tap the moles when they pop up!<br>üêπ Normal mole = <b>+10</b> points<br>‚≠ê Golden mole = <b>+50</b> points<br>üí£ Bomb = <b>-30</b> points ‚Äî don't tap!<br><br>You have 60 seconds. GO! ‚è±Ô∏è</div>
    <button onclick="document.getElementById('tutorial-overlay').style.display='none';localStorage.setItem('whack-a-mole-tutorial-seen','1');" ontouchstart="event.stopPropagation();document.getElementById('tutorial-overlay').style.display='none';localStorage.setItem('whack-a-mole-tutorial-seen','1');" ontouchstart="event.stopPropagation();document.getElementById('tutorial-overlay').style.display='none';localStorage.setItem('whack-a-mole-tutorial-seen','1');" style="background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:12px;padding:14px 36px;font-size:18px;font-weight:bold;cursor:pointer;box-shadow:0 4px 15px rgba(102,126,234,0.4);transition:transform 0.2s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">Got it! üéÆ</button>
  </div>
</div>
<script>if(!localStorage.getItem('whack-a-mole-tutorial-seen')){document.getElementById('tutorial-overlay').style.display='flex';}else{document.getElementById('tutorial-overlay').style.display='none';}</script>

</body>
</html>
