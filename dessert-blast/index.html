<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
  <title>Dessert Blast üßÅ</title>
  <style>
    *{margin:0;padding:0}
    html,body{width:100%;height:100%;overflow:hidden;background:#fff0f5}
    canvas{display:block;width:100%;height:100%;touch-action:none;position:relative;z-index:1}
    /* Sweet bakery background layer */
    #bg-layer{position:fixed;inset:0;z-index:0;pointer-events:none;
      background:linear-gradient(160deg,#fff5f8 0%,#ffe0ec 30%,#ffc0d8 60%,#ffb0cc 100%)}
    /* Sugar powder particles */
    .sugar-particle{position:fixed;pointer-events:none;z-index:0;border-radius:50%;background:#fff;opacity:.6}
    /* Cream corner decorations */
    .cream-corner{position:fixed;pointer-events:none;z-index:2;width:80px;height:80px}
    .cream-corner.tl{top:22px;left:0;background:radial-gradient(ellipse at 0% 0%,rgba(255,255,255,.7) 0%,transparent 70%);border-radius:0 0 80px 0}
    .cream-corner.tr{top:22px;right:0;background:radial-gradient(ellipse at 100% 0%,rgba(255,255,255,.7) 0%,transparent 70%);border-radius:0 0 0 80px}
    .cream-corner.bl{bottom:0;left:0;background:radial-gradient(ellipse at 0% 100%,rgba(255,255,255,.7) 0%,transparent 70%);border-radius:0 80px 0 0}
    .cream-corner.br{bottom:0;right:0;background:radial-gradient(ellipse at 100% 100%,rgba(255,255,255,.7) 0%,transparent 70%);border-radius:80px 0 0 0}
    /* Candy Factory decorations */
    .lollipop{position:fixed;pointer-events:none;z-index:2;font-size:40px;animation:lolliSpin 4s linear infinite}
    .lollipop.tl{top:30px;left:50px;animation-delay:0s}
    .lollipop.tr{top:30px;right:50px;animation-delay:1s}
    .lollipop.bl{bottom:10px;left:50px;animation-delay:2s}
    .lollipop.br{bottom:10px;right:50px;animation-delay:3s}
    @keyframes lolliSpin{0%{transform:rotate(0deg) scale(1)}50%{transform:rotate(180deg) scale(1.1)}100%{transform:rotate(360deg) scale(1)}}
    /* Dessert emoji burst */
    .dessert-emoji{position:fixed;pointer-events:none;z-index:10000;font-size:28px;animation:emojiFloat 1.5s ease-out forwards}
    @keyframes emojiFloat{0%{opacity:1;transform:translate(0,0) scale(1) rotate(0deg)}100%{opacity:0;transform:translate(var(--dx),var(--dy)) scale(.5) rotate(var(--rot))}}
    /* Shockwave */
    .candy-shockwave{position:fixed;pointer-events:none;z-index:10000;border-radius:50%;border:3px solid rgba(255,105,180,0.6);animation:candyShock 0.5s ease-out forwards}
    @keyframes candyShock{0%{width:0;height:0;opacity:1;transform:translate(-50%,-50%)}100%{width:400px;height:400px;opacity:0;transform:translate(-50%,-50%)}}
    .candy-particle{position:fixed;pointer-events:none;z-index:10000;animation:candyPart 0.9s cubic-bezier(.25,.46,.45,.94) forwards}
    @keyframes candyPart{0%{opacity:1;transform:translate(0,0) scale(1) rotate(0deg)}100%{opacity:0;transform:translate(var(--dx),var(--dy)) scale(0.2) rotate(var(--rot))}}
    .score-pop{position:fixed;pointer-events:none;z-index:10002;font-size:24px;font-weight:900;color:#ff1493;text-shadow:0 0 8px #ff69b4,0 0 20px #ff1493,2px 2px 4px rgba(0,0,0,0.3);animation:scorePop 1.2s cubic-bezier(.25,.46,.45,.94) forwards}
    @keyframes scorePop{0%{opacity:1;transform:translateY(0) scale(1.8)}40%{transform:translateY(-40px) scale(1.2)}100%{opacity:0;transform:translateY(-100px) scale(0.6)}}
  </style>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8346383990981353" crossorigin="anonymous"></script>
  <script src="../game-audio.js"></script>
</head>
<body>
<!-- Background layer behind canvas -->
<div id="bg-layer"></div>

<a href="https://gamezipper.com/" style="position:fixed;top:0;left:0;right:0;background:rgba(255,182,193,0.9);color:#c71585;text-align:center;padding:4px;font-size:12px;z-index:99999;text-decoration:none;border-bottom:1px solid rgba(255,105,180,.3)">‚¨Ö More Games at GameZipper.com</a>
  <canvas id="gameCanvas"></canvas>

  <!-- Cream corner decorations -->
  <div class="cream-corner tl"></div>
  <div class="cream-corner tr"></div>
  <div class="cream-corner bl"></div>
  <div class="cream-corner br"></div>

  <!-- Candy ball decorations using real sprites -->
  <img src="images/ball_blue.png" style="position:fixed;top:60px;left:8px;width:32px;opacity:0.5;pointer-events:none;z-index:2;animation:lolliSpin 5s linear infinite" alt="">
  <img src="images/ball_yellow.png" style="position:fixed;top:60px;right:8px;width:32px;opacity:0.5;pointer-events:none;z-index:2;animation:lolliSpin 5s linear infinite reverse" alt="">
  <img src="images/ball_grey.png" style="position:fixed;bottom:12px;left:8px;width:28px;opacity:0.4;pointer-events:none;z-index:2;animation:lolliSpin 6s linear infinite" alt="">
  <img src="images/ball_black.png" style="position:fixed;bottom:12px;right:8px;width:28px;opacity:0.4;pointer-events:none;z-index:2;animation:lolliSpin 6s linear infinite reverse" alt="">
  <img src="images/icon_play.png" style="position:fixed;top:50%;left:6px;width:24px;opacity:0.2;pointer-events:none;z-index:2" alt="">
  <img src="images/icon_play.png" style="position:fixed;top:50%;right:6px;width:24px;opacity:0.2;pointer-events:none;z-index:2;transform:scaleX(-1)" alt="">

  <!-- Decoration Layer -->
  <div class="lollipop tl">üç≠</div>
  <div class="lollipop tr">üç¨</div>
  <div class="lollipop bl">üç¨</div>
  <div class="lollipop br">üç≠</div>

  <!-- FX Overlay -->
  <div id="fx-overlay" style="position:fixed;inset:0;pointer-events:none;z-index:9999;overflow:hidden"></div>

  <script>
  (function(){
    const overlay=document.getElementById('fx-overlay');
    const canvas=document.getElementById('gameCanvas');

    // === Sugar powder particles (falling behind canvas) ===
    const sugarParts=[];
    const SUGAR_COUNT=20;
    for(let i=0;i<SUGAR_COUNT;i++){
      const el=document.createElement('div');
      el.className='sugar-particle';
      const sz=2+Math.random()*4;
      el.style.width=sz+'px';el.style.height=sz+'px';
      document.body.appendChild(el);
      sugarParts.push({
        el,x:Math.random()*window.innerWidth,y:-10-Math.random()*300,
        speed:0.15+Math.random()*0.3,drift:Math.random()*0.3-0.15
      });
    }
    function animSugar(){
      const h=window.innerHeight,w=window.innerWidth;
      for(const s of sugarParts){
        s.y+=s.speed;s.x+=s.drift;
        if(s.y>h+10){s.y=-10;s.x=Math.random()*w;}
        s.el.style.transform=`translate(${s.x}px,${s.y}px)`;
      }
      requestAnimationFrame(animSugar);
    }
    animSugar();

    // === Click/Touch Effects - Dessert emoji burst ===
    const dessertEmojis=['üç∞','üç©','üßÅ','üç¨','üç´'];
    const shapes=['‚óè','‚ñ†','‚òÖ','‚ô¶','‚ñ≤','‚ô•'];
    const candyColors=['#ff1493','#ff6347','#ffd700','#00ff7f','#1e90ff','#ff69b4','#ffa500','#9370db'];

    function spawnDessertBurst(x,y){
      // 5 dessert emojis floating up
      for(let i=0;i<5;i++){
        const em=document.createElement('div');
        em.className='dessert-emoji';
        em.textContent=dessertEmojis[Math.floor(Math.random()*dessertEmojis.length)];
        em.style.left=x+'px';em.style.top=y+'px';
        const angle=-Math.PI/2+Math.random()*Math.PI-Math.PI/2;
        const dist=60+Math.random()*80;
        em.style.setProperty('--dx',(Math.cos(angle)*dist)+'px');
        em.style.setProperty('--dy',(Math.sin(angle)*dist-40)+'px');
        em.style.setProperty('--rot',(Math.random()*360-180)+'deg');
        overlay.appendChild(em);
        setTimeout(()=>em.remove(),1500);
      }

      // Candy debris
      for(let i=0;i<15;i++){
        const p=document.createElement('div');
        p.className='candy-particle';
        p.textContent=shapes[Math.floor(Math.random()*shapes.length)];
        p.style.fontSize=(10+Math.random()*14)+'px';
        p.style.color=candyColors[Math.floor(Math.random()*candyColors.length)];
        p.style.left=x+'px';p.style.top=y+'px';
        const angle=Math.random()*Math.PI*2;
        const dist=60+Math.random()*120;
        p.style.setProperty('--dx',Math.cos(angle)*dist+'px');
        p.style.setProperty('--dy',(Math.sin(angle)*dist+40)+'px');
        p.style.setProperty('--rot',(Math.random()*720-360)+'deg');
        overlay.appendChild(p);
        setTimeout(()=>p.remove(),900);
      }

      // Pink shockwave ring
      const sw=document.createElement('div');
      sw.className='candy-shockwave';
      sw.style.left=x+'px';sw.style.top=y+'px';
      overlay.appendChild(sw);
      setTimeout(()=>sw.remove(),500);

      // Score float text
      const scores=['+100','+200','+50','Sweet!','Yummy!','üç∞'];
      const sc=document.createElement('div');
      sc.className='score-pop';
      sc.textContent=scores[Math.floor(Math.random()*scores.length)];
      sc.style.left=(x-30)+'px';sc.style.top=(y-20)+'px';
      overlay.appendChild(sc);
      setTimeout(()=>sc.remove(),1200);
    }

    canvas.addEventListener('pointerup',function(e){
      setTimeout(()=>spawnDessertBurst(e.clientX,e.clientY),200);
    });
  })();
  </script>
  <script src="bundle-1771356588.js"></script>
<div id="tutorial-overlay" style="position:fixed;inset:0;pointer-events:auto;background:rgba(0,0,0,0.82);display:flex;align-items:center;justify-content:center;z-index:999999">
<div style="background:linear-gradient(135deg,#fff0f5,#ffe0ec);border-radius:20px;padding:36px 28px;max-width:340px;text-align:center;color:#8b0040;box-shadow:0 8px 32px rgba(255,105,180,0.3),0 0 20px rgba(255,182,193,.4)">
<div style="font-size:56px;margin-bottom:12px">üç∞</div>
<h2 style="font-size:24px;color:#c71585;margin-bottom:16px">How to Play</h2>
<p style="font-size:16px;line-height:1.9;text-align:left;color:#8b3060">
üëÜ <b>Drag</b> dessert blocks onto the board<br>
‚ú® Fill a complete <b>row or column</b> to clear it!<br>
‚ö†Ô∏è Game ends when no blocks can fit
</p>
<p style="font-size:14px;color:#b06080;margin-top:12px">üí° Tip: Plan ahead and save space for big blocks! üß†</p>
<button  onmousedown="var o=document.getElementById('tutorial-overlay');if(o)o.remove();var c=document.getElementById('gameCanvas')||document.querySelector('canvas');if(c)c.style.pointerEvents='auto';" style="touch-action:manipulation;cursor:pointer;position:relative;z-index:10000000;margin-top:20px;padding:14px 36px;font-size:18px;border:none;border-radius:12px;background:linear-gradient(135deg,#ff69b4,#ff1493);color:#fff;cursor:pointer;font-weight:bold;box-shadow:0 4px 15px rgba(255,20,147,.4);cursor:pointer;user-select:none;-webkit-user-select:none;touch-action:manipulation;touch-action:manipulation;cursor:pointer;position:relative;z-index:10000000;margin-top:20px;padding:14px 36px;font-size:18px;border:none;border-radius:12px;background:linear-gradient(135deg,#ff69b4,#ff1493);color:#fff;cursor:pointer;font-weight:bold;box-shadow:0 4px 15px rgba(255,20,147,.4)" >Got it! üéÆ</button>"
</div></div>
<script>if(localStorage.getItem('tutorial_dessert'))document.getElementById('tutorial-overlay').remove();</script>
  <script>
(function(){
  var ov = document.getElementById('tutorial-overlay');
  if (!ov) return;
  
  // Get canvas for pointer-events reset
  var cvs = document.getElementById('gameCanvas') || document.querySelector('canvas');
  
  // Â¶ÇÊûúÂ∑≤ÊòæÁ§∫ËøátutorialÔºåÁßªÈô§overlay
  if (localStorage.getItem('tutorial-seen-' + window.location.pathname)) {
    ov.remove();
    return;
  }
  
  // ËÆæÁΩÆoverlayÁöÑÂÖ®Â±èclick/touch‰∫ã‰ª∂ÂÖ≥Èó≠
  var closeTut = function(e) {
    e && e.preventDefault && e.preventDefault();
    e && e.stopPropagation && e.stopPropagation();
    if (cvs) cvs.style.pointerEvents = 'auto';
    ov.remove();
    localStorage.setItem('tutorial-seen-' + window.location.pathname, '1');
  };
  
  // Â§öÁßç‰∫ã‰ª∂Â§ÑÁêÜ
  ov.addEventListener('click', closeTut, true);
  ov.addEventListener('touchend', closeTut, true);
  ov.addEventListener('pointerdown', closeTut, true);
  
  // Disable canvas events during tutorial
  if (cvs) cvs.style.pointerEvents = 'none';
})();
</script>
  <script src="../game-audio-auto.js"></script>
</body>
</html>
